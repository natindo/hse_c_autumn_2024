# CI/CD - Домашка

Под эту задачку надо будет создать репозиторий в нашем гитлабе
Вся работа происходит в отдельной ветке. После того, как вы сделали решение, нужно будет сделать merge request в main ветку и прикрепить к ней в качестве reviewer ментора


1. За основу берем задачу "Самое длинное предложение" из домашнего задания по массивам/строкам. Слово здесь - последовательность латинских символов, разделенная пробелами. На этот раз строка может быть любой, например `"...."`
2. Делим решение на 3 функции:

```c
int read_lines(const char *filename, char lines[256][256]) {
    // функция, которая читает текстовый файл и записывает в lines массив предложений
    // если все ок, возвращает 0, если не ок, то 1
} 

int count_words(const char *filename, char sentence[256]) {
    int res = read_lines(filename, lines);
    // считает число слов в строке
}

int longest_sentence_in_file(const char *filename, char longest_sentence[256]) {
    char lines[256][256];
    int res = read_lines(filename, lines);
    // ...
    // считает число предлоежний в файле
}
```

3. Пишем юнит-тесты на longest_sentence_in_file с CMocka, при этом функцию read_lines мокаем:
- В комментариях в файле с тестами пишем классы эквивалентности функции:

```c
// some_test.c
/*
    count_words:
    1. Пустая строка - должно вернуть 0 слов
    ... 
*/
```

Если хочется почитать поподробне, то можно почитать эту статью https://dzen.ru/a/ZmAGfF6DuFdyYvNY

4. аналогично пишем тесты на count_words

5. Делаем пайплайн для гитлаба:
- шаг lint - запускает cppcheck на коде проекта
- шаг build - собирает main файл и кладет его в артефакты
- шаг build_test - собирает исполняемый файл с тестами и 
- шаг test_unit - запускает юнит-тест

**Под каждый шаг должна быть команда в Makefile**

В итоге у вас должна получиться примерно такая структура проекта:
- /src C-файлы, например sentence_counter.c, sentence_counter_test.c и тд
- /include - хедеры
- .gitlab-ci.yml - файл gitlab ci
- Makefile - мейкфайл с командами запуска
- README.MD - файлик с этим тестом домашки (можно скопировать отсюда)

Оформление:
**ПРИВАТНЫЙ РЕПОЗИТОРИЙ** (вроде там только такой и можно создать)
название репозитория фамилия_латиницей_basic_c
в названии merge request должно быть ваше ФИО
добавляете в качестве участника меня (@pcheklin) и своего ментора

По каким критериям будет оцениваться домашка:
- обязательно должен быть зеленый пайплайн
- обязательно должны быть unit-тесты
- тесты должны корректно называться (не test_1 и тд)
- не забываем про комментарии к тестам
- не должно быть лишних файлов в merge request (.vscode/.idea, .DS_Store, исполняемые файлы)
- нет cppcheck: -2 балла

Как будет происходить приемка:
- чуть позже в чатике вы распределитесь по менторам
- когда дз готово, прикрепляете ментора в reviewers в merge request
- если к решению есть вопросы, то ментор напишет вам в комментарии, вы сможете это поправить
- снижения баллов за исправления до конца дедлайна не будет
- если вы прислали дз в середине срока, но ментор ответил вам только в конце и вы не успели поправить, то баллы тоже снижать не будем, но поправить все надо будет уже за 1 раз

Сроки: c 16 сентября до 28 декабря 23:59
